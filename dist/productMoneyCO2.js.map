{"version":3,"file":"productMoneyCO2.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///./src/content/productMoneyCO2.js"],"sourcesContent":["var link = document.createElement('link');\nlink.setAttribute('rel', 'stylesheet');\nlink.setAttribute('type', 'text/css');\nlink.setAttribute('href', 'https://fonts.googleapis.com/css?family=Dosis:400,500|Poppins:400,700&amp;display=swap');\ndocument.head.appendChild(link);\n\nlet amazon_divs = [\n  \"apex_desktop\", // Regular Products\n  \"MediaMatrix\", // Books\n  // Insert any others\n]\n\n//whole table to display on the product page\nvar tbl2 = document.createElement('table');\ntbl2.style.background = \"-webkit-gradient(linear, left top, right top, from(#5dbd52), to(#215d33))\";\ntbl2.style.width = \"50%\";\ntbl2.style.boxShadow = 'rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px';\n\n//row for displaying the word Clove as the header\nvar tr11 = tbl2.insertRow();\ntr11.style.borderCollapse = 'collapse';\ntr11.style.border = 'none';\nvar td11 = tr11.insertCell();\nvar textArea11 = document.createElement(\"textarea\");\ntextArea11.value = \"\\nClove\";\ntextArea11.style.height = '1.75em';\ntextArea11.style.top = 0;\ntextArea11.style.left = 0;\ntextArea11.style.resize = \"none\";\ntextArea11.readOnly = \"readonly\";\ntextArea11.style.width = '100%';\ntextArea11.style.justifySelf = 'center';\ntextArea11.style.padding = 0;\ntextArea11.style.outline = 'none';\ntextArea11.style.boxShadow = 'none';\ntextArea11.style.background = \"-webkit-gradient(linear, left top, right top, from(#5dbd52), to(#215d33))\";\ntextArea11.style.color = \"white\";\ntextArea11.style.textAlign = 'center';\ntextArea11.style.fontFamily = 'Poppins';\ntextArea11.style.borderColor = 'transparent'\ntextArea11.style.fontSize = '30px';\ntd11.appendChild(textArea11);\n\n//row for displaying the co2 and donation amount in the table\nvar tr12 = tbl2.insertRow();\nvar td12 = tr12.insertCell();\nvar textArea = document.createElement(\"textarea\");\ntextArea.style.textAlignLast = 'center';\ntextArea.style.resize = \"none\";\ntextArea.readOnly = \"readonly\";\ntextArea.style.width = '100%';\ntextArea.style.justifySelf = 'center';\ntextArea.style.height = '6em';\ntextArea.color = \"#062d1f\";\ntextArea.style.outline = 'none';\ntextArea.style.boxShadow = 'none';\ntextArea.style.background = 'transparent';\ntextArea.style.backgroundColor = '#d1ffd3';\ntextArea.style.textAlign = 'center';\ntextArea.style.fontFamily = 'Poppins';\ntextArea.style.borderColor = '#215d33'\n\n\n\nlet categoriesMap = new Map([\n  [\"Appliances\", 0.123], [\"Arts, Crafts & Sewing\", 0.478], [\"Automotive\", 0.178], [\"Baby\", 0.402], [\"Beauty\", 0.261], [\"Books\", 0.189], [\"Collectibles & Fine Arts\", 1.618], \n  [\"Electronics\", 0.488], [\"Clothing, Shoes & Jewelry\", 1.947], [\"Clothing, Shoes & Jewelry - Baby\", 1.947], [\"Clothing, Shoes & Jewelry - Boys\", 1.947], \n  [\"Clothing, Shoes & Jewelry - Girls\", 1.947], [\"Clothing, Shoes & Jewelry - Men\", 1.947], [\"Clothing, Shoes & Jewelry - Women\", 1.947], \n  [\"Gift Cards\", 0.186], [\"Grocery & Gourmet Food\", 0.241], [\"Handmade\", 0.494], [\"Health & Personal Care\", 0.411], [\"Home & Kitchen\", 1.0325], [\"Industrial & Scientific\", 0.247], \n  [\"Kindle Store\", 0], [\"Patio, Lawn & Garden\", 0.163], [\"Luggage & Travel Gear\", 0.108], [\"Magazine Subscriptions\", 0.358], [\"Apps & Games\", 1.251], [\"Movies & TV\", 0.05], \n  [\"Digital Music\", 0], [\"CDs & Vinyl\", 0.086], [\"Musical Instruments\", 0.025], [\"Office Products\", 0.7706], [\"Computers\", 0.488], [\"Pet Supplies\", 0.757], [\"Software\", 0.073], \n  [\"Sports & Outdoors\", 0.071], [\"Tools & Home Improvement\", 0.349], [\"Toys & Games\", 3.571], [\"Amazon Instant Video\", 0], [\"Vehicles\", 0.0925], [\"Video Games\", 1.251], \n  [\"Wine\", 0.33], [\"Cell Phones & Accessories\", 0.236], [\"Default\", 0], [\"Beauty & Personal Care\", 0.261], [\"Health & Household\", 0.165]\n]);\n\nlet categories = Array.from(categoriesMap.keys());\n\nasinVal = \"\";\ncategoryPath = \"\"\n\n\n// connection code\n\nvar port = chrome.runtime.connect({name: \"Get Product Data\"});\nport.onMessage.addListener(function(msg) {\n  if (msg.answer.charAt(0) == \"1\"){\n    try {\n      desktop = document.getElementById(amazonDiv);\n\n      categoryPath = msg.answer.substring(2);\n\n      category = categoryPath.split(\"/\")[0];\n\n      console.log(categoryPath);\n      console.log(category);\n\n      let co2PerDollar = categoriesMap.get(category);\n      if (co2PerDollar == null || category == null) throw \"null\";\n      let dimensionsString = desktop.getElementsByClassName(\"a-offscreen\");\n      let number = dimensionsString[0].textContent.substring(1);\n      let product = document.getElementById(\"productTitle\").innerText;\n      let price = Number(number.replace(/[^0-9.-]+/g,\"\"));\n\n      let co2Emissions = (co2PerDollar + 0.1027) * (price/4.5);\n      var donation = (co2Emissions * 0.04).toFixed(2);\n      textArea.value = \"Donation: $\" + donation + \"\\n\\nCO2 emissions: \" + co2Emissions.toFixed(2) + \"kg\";\n      td12.appendChild(textArea);\n      desktop.appendChild(tbl2);\n\n      \n      port.postMessage({data: \"2\" + asinVal + msg.answer.substring(1) + \"@\" + product});\n    }\n    catch (err){\n      textArea.value = \"Sorry we currently don't\" + \"\\nsupport this product\";\n      td12.appendChild(textArea);\n      desktop.appendChild(tbl2);\n    }\n    \n  }\n\n});\n// end connection code\n\nvar amazonDiv = \"\";\n\nfor (var amazon_div of amazon_divs) {\n  let desktop = document.getElementById(amazon_div);\n  if (desktop) {\n    amazonDiv = amazon_div;\n    try{\n      category = \"\";      \n      strElem = document.querySelectorAll(\"#prodDetails\");\n\n      if (strElem.length == 0){\n        strElem = document.querySelectorAll(\"#detailBulletsWrapper_feature_div\");\n      }\n      elemStr = (strElem[0].innerText);\n      asinStrVal = elemStr.substring(elemStr.indexOf(\"ASIN\") + 5).toString();\n\n      while (!isNaN(asinStrVal.charAt(0)) || !(/[a-zA-Z]/).test(asinStrVal.charAt(0))){\n        asinStrVal = asinStrVal.substring(1);\n      }\n      asinVal = asinStrVal.substring(0, 11)\n\n      for (var i = 0 ; i < categories.length; i++){\n        if (elemStr.includes(categories[i])){\n          category = categories[i];\n        }\n      }\n      if (category.length === 0){\n        subCatIndex = asinStrVal.indexOf(\"#\")\n        firstIndex = asinStrVal.indexOf(' ', subCatIndex + 1);\n        secondIndex = asinStrVal.indexOf(' ', firstIndex + 1);\n        subCatIndex = secondIndex + 1;\n        \n        subCatStr = asinStrVal.substring(subCatIndex, asinStrVal.indexOf(\"\\n\", subCatIndex)).trim();\n        console.log(subCatStr);\n\n        port.postMessage({data: \"1\" + subCatStr});\n        //use python script\n      }\n      else{\n        subCatIndex = asinStrVal.split(\"#\", 2).join(\"#\").length;\n        firstIndex = asinStrVal.indexOf(' ', subCatIndex + 1);\n        secondIndex = asinStrVal.indexOf(' ', firstIndex + 1); // second space\n        subCatIndex = secondIndex + 1;\n\n        subCatStr = asinStrVal.substring(subCatIndex, asinStrVal.indexOf(\"\\n\", subCatIndex)).trim();\n        console.log(subCatStr);\n        port.postMessage({data: \"1\" + category + \"@\" + subCatStr});\n        // go directly to map code\n      }\n      \n    }\n    //If the product is not found in the lists\n    catch (err){\n      console.log(err)\n      textArea.value = \"Sorry we currently don't\" + \"\\nsupport this product\";\n      td12.appendChild(textArea);\n      desktop.appendChild(tbl2);\n    }\n  }\n}\n\n"],"names":[],"sourceRoot":""}